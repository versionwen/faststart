package com.wenxin.learn.faststart.web.controller;import com.baomidou.mybatisplus.extension.plugins.pagination.Page;import com.wenxin.learn.faststart.web.api.CommonPage;import com.wenxin.learn.faststart.web.api.CommonResult;import com.wenxin.learn.faststart.web.dto.MenuNode;import com.wenxin.learn.faststart.web.entity.Menu;import com.wenxin.learn.faststart.web.service.MenuService;import io.swagger.annotations.Api;import io.swagger.annotations.ApiOperation;import lombok.extern.slf4j.Slf4j;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.*;import java.util.List;/** * @author version * @version 1.0 * @date 2020/10/11 17:49 */@RestController@Api(tags = "后台菜单管理")@RequestMapping("/menu")@Slf4jpublic class MenuController {    @Autowired    private MenuService menuService;    @ApiOperation("添加后台菜单")    @PostMapping("/menu")    public CommonResult creat(@RequestBody Menu menu){        boolean success = menuService.create(menu);        if(success){            return CommonResult.success("创建菜单成功");        }        else {            return CommonResult.failed();        }    }    @ApiOperation("根据ID删除后台菜单")    @PostMapping("/delete/{id}")    public CommonResult delete(@PathVariable Long id){        boolean success = menuService.removeById(id);        if(success){            return CommonResult.success("删除数据成功");        }        else {            return CommonResult.failed("删除数据失败");        }    }    @ApiOperation("修改后台菜单")    @PostMapping("update/{id}")    public CommonResult update(@PathVariable Long id,@RequestBody Menu menu){        boolean success = menuService.update(id,menu);        if(success){            return CommonResult.success("修改后台菜单成功");        }        else {            return CommonResult.failed("修改后台订单失败");        }    }    @ApiOperation("修改后台菜单显示状态")    @PostMapping("/updateHidden/{id}")    public CommonResult updateHidden(@PathVariable Long id,@RequestParam("hidden") Integer hidden){        boolean success = menuService.updateHidden(id, hidden);        if(success){            return CommonResult.success("修改菜单显示状态成功");        }        else {            return CommonResult.failed("修改菜单显示状态失败");        }    }    @ApiOperation("根据ID获取菜单详情")    @GetMapping(value = "/{id}")    public CommonResult<Menu>getItem(@PathVariable Long id){        Menu menu = menuService.getById(id);        if(menu !=null){            return CommonResult.success(menu);        }        return CommonResult.failed("ID不存在");    }    @ApiOperation("树形结构返回所有菜单列表")    @PostMapping(value = "/treeList")    public CommonResult<List<MenuNode>> treeList() {        List<MenuNode> list = menuService.treeList();        log.info("树形结构返回所有的菜单列表为：{}",list);        return CommonResult.success(list);    }    @ApiOperation("分页查询后台菜单")    @GetMapping(value = "/list/{partentId}")    public CommonResult<CommonPage<Menu>>list(@PathVariable(value = "partentId") Long partentId,@RequestParam(value = "pageSize",defaultValue = "5") Integer pageSize,                                              @RequestParam(value = "pageNum",defaultValue = "1") Integer pageNum){        Page<Menu>menuList = menuService.list(partentId,pageSize,pageNum);        return CommonResult.success(CommonPage.restPage(menuList));    }}